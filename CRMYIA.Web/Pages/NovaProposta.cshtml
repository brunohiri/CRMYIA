@page
@model CRMYIA.Web.Pages.NovaPropostaModel
@{
    ViewData["Title"] = "Nova";
    ViewData["Pagina"] = "Proposta";
}
@using CRMYIA.Business;
@using CRMYIA.Business.Util;
@using System.Security.Claims;


<div class="card card-default">
    <div class="card-header">
        <h3 class="card-title">@ViewData["Title"] @ViewData["Pagina"]</h3>
    </div>
    <!-- /.card-header -->
    <form method="post">
        <div class="card-body">
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        @if ((Model != null) && (Model.Mensagem != null))
                        {
                            <div class="@Model.Mensagem.CssClass alert-dismissible">
                                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                                <i class="@Model.Mensagem.IconClass"></i>
                                @Model.Mensagem.Mensagem
                            </div>
                        }
                    </div>
                </div>
            </div>
            <div class="row">
                <input type="hidden" class="form-control" asp-for="@Model.Entity.IdProposta">
                <input type="hidden" class="form-control" asp-for="@Model.Entity.IdUsuario">
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Data de Cadastro *</label>
                        <input type="text" class="form-control" placeholder="" asp-for="@Model.Entity.DataCadastro" readonly>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Data de Solicitação *</label>
                        <div class="input-group date" id="PropostaDataSolicitacao" data-target-input="nearest">
                            <input type="text" class="form-control datetimepicker-input" data-target="#PropostaDataSolicitacao" asp-for="@Model.Entity.DataSolicitacao" />
                            <div class="input-group-append" data-target="#PropostaDataSolicitacao" data-toggle="datetimepicker">
                                <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Corretor *</label>
                        @if (UsuarioModel.GetPerfil(HttpContext.User.FindFirst(ClaimTypes.PrimarySid).Value.ExtractLong()) == (byte?)EnumeradorModel.Perfil.Corretor)
                        {
                            <input type="hidden" class="form-control" asp-for="@Model.Entity.IdUsuarioCorretor" id="PropostaIdUsuarioCorretor" />
                            <input type="text" readonly class="form-control" id="PropostaIdUsuarioCorretorNome" value="@Model.ListCorretor.Where(x=>x.IdUsuario == Model.Entity.IdUsuarioCorretor).FirstOrDefault().Nome" />
                        }
                        else
                        {
                            <select class="form-control select2" style="width: 100%;"
                                    asp-for="@Model.Entity.IdUsuarioCorretor" id="PropostaIdUsuarioCorretor">
                                <option selected="selected">Selecione...</option>
                                @foreach (var Item in Model.ListCorretor)
                                {
                                    <option value="@Item.IdUsuario">@(Item.Nome)</option>
                                }
                            </select>
                        }
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-sm-4">
                    <div class="form-group">
                        <label>Modalidade *</label>
                        <select class="form-control select2" style="width: 100%;" asp-for="@Model.Entity.IdModalidade" id="PropostaIdModalidade">
                            <option selected="selected" value="0">Selecione...</option>
                            @foreach (var Item in Model.ListModalidade)
                            {
                                <option value="@Item.IdModalidade">@(Item.Descricao)</option>
                            }
                        </select>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Seguradora/Operadora *</label>
                        <select class="form-control select2" style="width: 100%;" asp-for="@Model.IdOperadora" id="PropostaIdOperadora">
                            <option selected="selected" value="0">Selecione...</option>
                            @foreach (var Item in Model.ListOperadora)
                            {
                                <option value="@Item.IdOperadora">@(Item.Descricao)</option>
                            }
                        </select>

                    </div>
                </div>
                <div class="form-group col-md-1">
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <div class="input-group">
                            <a href="/NovoOperadora"><i title="Nova Seguradora" class="fas fa-plus-circle fa-2x"></i></a>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <label>Produto *</label>
                        <input type="hidden" id="PropostaIdProdutoHidden" value="" />
                        <select class="form-control select2" style="width: 100%;" id="PropostaIdProduto">
                            <option selected="selected" value="0">Selecione...</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4">
                    <div class="form-group">
                        <label>Linha</label>
                        <input type="hidden" id="PropostaIdLinhaHidden" value="" />
                        <select class="form-control select2" style="width: 100%;" id="PropostaIdLinha">
                            <option selected="selected" value="0">Selecione...</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <label>Categoria *</label>
                        <input type="hidden" id="PropostaIdCategoriaHidden" value="@Model.Entity.IdCategoria" />
                        <select class="form-control select2" style="width: 100%;" asp-for="@Model.Entity.IdCategoria" id="PropostaIdCategoria">
                            <option selected="selected" value="0">Selecione...</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <label>Porte *</label>
                        <select class="form-control select2" style="width: 100%;" asp-for="@Model.Entity.IdPorte" id="PropostaIdPorte">
                            <option selected="selected" value="0">Selecione...</option>
                            @foreach (var Item in Model.ListPorte)
                            {
                                <option value="@Item.IdPorte">@(Item.Descricao)</option>
                            }
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-2">
                    <div class="form-group">
                        <label>CPF/CNPJ *</label>
                        <input type="text" class="form-control cpf-cnpj" placeholder="CPF/CNPJ" required id="PropostaDocumentoCliente" />
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <input type="hidden" class="form-control" asp-for="@Model.Entity.IdCliente" id="PropostaIdClienteHidden" />
                        <label>Nome/Razão Social *</label>
                        <input type="text" class="form-control" placeholder="Nome/Razão Social" readonly id="PropostaClienteNome" />
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="form-group">
                        <label>Data Nasc./Abertura</label>
                        <input type="text" class="form-control" placeholder="Data de Nascimento ou Abertura" readonly id="PropostaClienteDataNascAbertura" />
                    </div>
                </div>
                <div class="col-sm-1">
                    <div class="form-group">
                        <label>Situação</label>
                        <input type="text" class="form-control" placeholder="Situação" readonly id="PropostaClienteSituacao" />
                    </div>
                </div>
                <div class="col-sm-1">
                    <div class="form-group" style="margin-top:38px;">
                        <a asp-page="/NovoCliente" asp-route-id="@System.Web.HttpUtility.UrlEncode(Criptography.Encrypt(Model.Entity.IdCliente.ToString()))">Ver Cadastro</a>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        <label>Endereço</label>
                        <input type="text" class="form-control" placeholder="Endereço" id="PropostaClienteEndereco" readonly />
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" class="form-control" placeholder="Email" id="PropostaClienteEmail" readonly />
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Celular/WhatsApp</label>
                        <input type="text" class="form-control telefone" placeholder="Celular/WhatsApp" id="PropostaClienteCelular" readonly />
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Telefone</label>
                        <input type="text" class="form-control telefone" placeholder="Telefone" id="PropostaClienteTelefone" readonly />
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Próximo contato com o Cliente</label>
                        <input type="hidden" class="form-control" asp-for="@Model.EntityVisita.IdVisita">
                        <div class="input-group date" id="PropostaProximoContatoComCliente" data-target-input="nearest">
                            <input type="text" class="form-control datetimepicker-input" id="PropostaDataProximoContatoComCliente" data-target="#PropostaProximoContatoComCliente" value="@Model.EntityVisita.DataAgendamento.Value.ToString("dd/MM/yyyy HH:mm:ss")" asp-for="@Model.EntityVisita.DataAgendamento" />
                            <div class="input-group-append" data-target="#PropostaProximoContatoComCliente" data-toggle="datetimepicker">
                                <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Horário para ligar</label>
                        <select class="form-control" style="width: 100%;" asp-for="@Model.Entity.PeriodoParaLigar" id="PeriodoParaLigar">
                            <option selected="selected" value="0">Selecione...</option>
                            <option value="Manhã">Manhã</option>
                            <option value="Tarde">Tarde</option>
                            <option value="Noite">Noite</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Fase da Proposta *</label>
                        <select class="form-control select2" style="width: 100%;" asp-for="@Model.Entity.IdFaseProposta" id="PropostaIdFaseProposta">
                            <option selected="selected" value="0">Selecione...</option>
                            @foreach (var Item in Model.ListFaseProposta)
                            {
                                <option value="@Item.IdFaseProposta">@(Item.Descricao)</option>
                            }
                        </select>
                    </div>
                </div>

                <div class="col-sm-2">
                    <div class="form-group">
                        <label>Valor da Proposta R$ *</label>
                        <input type="text" class="form-control money" style="text-align:right;" placeholder="R$" asp-for="@Model.Entity.ValorPrevisto">
                    </div>
                </div>
                <div class="col-sm-1">
                    <div class="form-group">
                        <label>Qtd Vidas *</label>
                        <input type="text" class="form-control" style="text-align:right;" placeholder="0" asp-for="@Model.Entity.QuantidadeVidas" id="PropostaQuantidadeVidas" readonly>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-1">
                    <div class="form-group">
                        <label>Possui Plano?*</label>
                        <div class="custom-control custom-switch custom-switch-off-danger custom-switch-on-success">
                            <input type="checkbox" class="custom-control-input" id="PropostaPossuiPlano" asp-for="@Model.Entity.PossuiPlano">
                            <label class="custom-control-label" for="PropostaPossuiPlano">Sim</label>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Qual plano?</label>
                        <input type="text" class="form-control" placeholder="Ex: Plano A" asp-for="@Model.Entity.PlanoJaUtilizado" id="PropostaPlanoJaUtilizado">
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="form-group">
                        <label>Há quanto tempo?</label>
                        <input type="text" class="form-control" placeholder="Ex: 2 anos" asp-for="@Model.Entity.TempoPlano" id="PropostaTempoPlano">
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Preferência Hospitalar</label>
                        <input type="text" class="form-control" placeholder="Ex: Hospital X" asp-for="@Model.Entity.PreferenciaHospitalar" id="PropostaPreferenciaHospitalar">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-2">
                    <div class="form-group">
                        <label>Status da Proposta *</label>
                        <select class="form-control" style="width: 100%;" asp-for="@Model.Entity.IdStatusProposta" id="PropostaIdStatusProposta">
                            <option selected="selected" value="0">Selecione...</option>
                            @foreach (var Item in Model.ListStatusProposta)
                            {
                                <option value="@Item.IdStatusProposta">@(Item.Descricao)</option>
                            }
                        </select>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <label>Motivo do Declínio</label>
                        <select class="form-control" style="width: 100%;" asp-for="@Model.Entity.IdMotivoDeclinio" id="PropostaIdMotivoDeclinio">
                            <option selected="selected" value="0">Selecione...</option>
                            @foreach (var Item in Model.ListMotivoDeclinio)
                            {
                                <option value="@Item.IdMotivoDeclinio">@(Item.Descricao)</option>
                            }
                        </select>
                    </div>
                </div>
                <div class="col-sm-1">
                    <div class="form-group">
                        <label>Status *</label>
                        <div class="custom-control custom-switch custom-switch-off-danger custom-switch-on-success">
                            <input type="checkbox" class="custom-control-input" id="PropostaAtivo" checked asp-for="@Model.Entity.Ativo">
                            <label class="custom-control-label" for="PropostaAtivo">Ativo</label>
                        </div>
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="form-group">
                        <label>Probabilidade de Fechamento</label>
                        <select class="form-control" style="width: 100%;" asp-for="@Model.Entity.Probabilidade" id="PropostaProbabilidade">
                            <option selected="selected" value="0">Selecione...</option>
                            <option value="0">0%</option>
                            <option value="5">5%</option>
                            <option value="10">10%</option>
                            <option value="15">15%</option>
                            <option value="20">20%</option>
                            <option value="25">25%</option>
                            <option value="30">30%</option>
                            <option value="35">35%</option>
                            <option value="40">40%</option>
                            <option value="45">45%</option>
                            <option value="50">50%</option>
                            <option value="55">55%</option>
                            <option value="60">60%</option>
                            <option value="65">65%</option>
                            <option value="70">70%</option>
                            <option value="75">75%</option>
                            <option value="80">80%</option>
                            <option value="85">85%</option>
                            <option value="90">90%</option>
                            <option value="95">95%</option>
                            <option value="100">100%</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="form-group">
                        <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#modalAbordagem" style="margin-top:32px;">
                            Sugestão de Abordagem
                        </button>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        <label>Observações</label>
                        <textarea rows="3" class="form-control" placeholder="Observações Gerais" asp-for="@Model.Entity.Observacoes"></textarea>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-5">
                    <br />
                    <div class="row">
                        <h5>Informe a quantidade de pessoas por faixa etária:</h5>
                    </div>
                    <br />
                    @if (Model.ListFaixaEtaria != null && Model.ListFaixaEtaria.Count() > 0)
                    {
                        for (int i = 0; i < Model.ListFaixaEtaria.Count(); i++)
                        {
                            if ((i == 0) || (i % 5 == 0))
                            {
                                @Html.Raw("<div class=\"row\">")
                            }

                            <div class="col-sm-2">
                                <div class="form-group">
                                    <label>@Model.ListFaixaEtaria[i].Descricao</label>
                                    <input type="text" class="form-control faixaetaria" placeholder="0" name="PropostaFaixaEtariaQuantidade"
                                           value="@(Model.ListEntityPropostaFaixaEtaria == null || Model.ListEntityPropostaFaixaEtaria.Count() == 0 ? 0 : Model.ListEntityPropostaFaixaEtaria[i].Quantidade)" />
                                </div>
                            </div>

                            if ((i + 1) % 5 == 0)
                            {
                                @Html.Raw("</div>")
                            }
                        }
                        if (Model.ListFaixaEtaria.Count() % 5 > 0)
                        {
                            @Html.Raw("</div>")
                        }
                    }
                </div>
                <div class="col-sm-7">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="card card-primary card-outline card-tabs">
                                <div class="card-header p-0 pt-1 border-bottom-0">
                                    <ul class="nav nav-tabs" id="custom-tabs-three-tab" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" id="custom-tabs-three-home-tab" data-toggle="pill" href="#custom-tabs-three-home" role="tab" aria-controls="custom-tabs-three-home" aria-selected="true">Histórico</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="custom-tabs-three-profile-tab" data-toggle="pill" href="#custom-tabs-three-profile" role="tab" aria-controls="custom-tabs-three-profile" aria-selected="false">Ligações</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="custom-tabs-three-messages-tab" data-toggle="pill" href="#custom-tabs-three-messages" role="tab" aria-controls="custom-tabs-three-messages" aria-selected="false">Produções</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="card-body">
                                    <div class="tab-content" id="custom-tabs-three-tabContent">
                                        <div class="tab-pane fade active show" id="custom-tabs-three-home" role="tabpanel" aria-labelledby="custom-tabs-three-home-tab">
                                            <div class="timeline">
                                                @if (Model.ListEntityHistoricoProposta != null && Model.ListEntityHistoricoProposta.Count() > 0)
                                                {
                                                    int i = 0;
                                                    foreach (var Item in Model.ListEntityHistoricoProposta)
                                                    {
                                                        i++;
                                                        <!-- timeline time label -->
                                                        <div class="time-label @(i > 3 ? "collapse" : string.Empty)" @(i > 3 ? "id=collapseHistorico" : string.Empty)>
                                                            <span class="bg-blue">@Item.DataCadastro.ToString("dd/MM/yyyy")</span>
                                                        </div>
                                                        <!-- /.timeline-label -->
                                                        <!-- timeline item -->
                                                        <div class="@(i > 3 ? "collapse" : string.Empty)" @(i > 3 ? "id=collapseHistorico" : string.Empty)>
                                                            <i class="fas fa-user bg-green"></i>
                                                            <div class="timeline-item">
                                                                <span class="time"><i class="fas fa-clock"></i> @Item.DataCadastro.ToString("HH:mm:ss")</span>
                                                                <h3 class="timeline-header"><a href="#">@Item.IdUsuarioNavigation.Nome </a> escreveu:</h3>
                                                                <div class="timeline-body">
                                                                    @Item.Observacao
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- END timeline item -->
                                                    }
                                                    <div>
                                                        <a data-toggle="collapse" href="#collapseHistorico" role="button" aria-expanded="false" aria-controls="collapseHistorico"><i class="fas fa-plus"></i></a>
                                                        <i class="fas fa-clock bg-gray"></i>
                                                    </div>
                                                }
                                                else
                                                {
                                                    <div>
                                                        <i class="fas fa-clock bg-gray"></i>
                                                        <div class="timeline-item">
                                                            <span class="time"><i class="fas fa-clock"></i> @DateTime.Now.ToString("HH:mm:ss")</span>
                                                            <div class="timeline-body">
                                                                Nenhum histórico registrado
                                                            </div>
                                                        </div>
                                                        
                                                    </div>
                                                }

                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="custom-tabs-three-profile" role="tabpanel" aria-labelledby="custom-tabs-three-profile-tab">
                                            <div class="timeline">
                                                @if (Model.ListEntityHistoricoLigacao != null && Model.ListEntityHistoricoLigacao.Count() > 0)
                                                {
                                                    int i = 0;
                                                    foreach (var Item in Model.ListEntityHistoricoLigacao)
                                                    {
                                                        i++;
                                                        <!-- timeline time label -->
                                                        <div class="time-label @(i > 3 ? "collapse" : string.Empty)" @(i > 3 ? "id=collapseHistorico" : string.Empty)>
                                                            <span class="bg-blue">@Item.DataCadastro.ToString("dd/MM/yyyy")</span>
                                                        </div>
                                                        <!-- /.timeline-label -->
                                                        <!-- timeline item -->
                                                        <div class="@(i > 3 ? "collapse" : string.Empty)" @(i > 3 ? "id=collapseHistorico" : string.Empty)>
                                                            <i class="fas fa-user bg-green"></i>
                                                            <div class="timeline-item">
                                                                <span class="time"><i class="fas fa-clock"></i> @Item.DataCadastro.ToString("HH:mm:ss")</span>
                                                                <h3 class="timeline-header"><a href="#">@Item.IdUsuarioNavigation.Nome </a> escreveu:</h3>
                                                                <div class="timeline-body">
                                                                    @Item.Observacao
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- END timeline item -->
                                                    }
                                                    <div>
                                                        <a data-toggle="collapse" href="#collapseHistorico" role="button" aria-expanded="false" aria-controls="collapseHistorico"><i class="fas fa-plus"></i></a>
                                                        <i class="fas fa-clock bg-gray" data-toggle="modal" data-target="#modal-historico"></i>
                                                    </div>
                                                }
                                                else
                                                {
                                                    <div>
                                                        <i class="fas fa-clock bg-gray" data-toggle="modal" data-target="#modal-historico"></i>
                                                        <div class="timeline-item">
                                                            <span class="time">
                                                                <i class="fas fa-clock"></i>
                                                                @DateTime.Now.ToString("HH:mm:ss")
                                                            </span>
                                                            <div class="timeline-body">
                                                                Nenhum histórico de ligações registrado
                                                            </div>
                                                        </div>

                                                    </div>
                                                }

                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="custom-tabs-three-messages" role="tabpanel" aria-labelledby="custom-tabs-three-messages-tab">
                                            Morbi turpis dolor, vulputate vitae felis non, tincidunt congue mauris. Phasellus volutpat augue id mi placerat mollis. Vivamus faucibus eu massa eget condimentum. Fusce nec hendrerit sem, ac tristique nulla. Integer vestibulum orci odio. Cras nec augue ipsum. Suspendisse ut velit condimentum, mattis urna a, malesuada nunc. Curabitur eleifend facilisis velit finibus tristique. Nam vulputate, eros non luctus efficitur, ipsum odio volutpat massa, sit amet sollicitudin est libero sed ipsum. Nulla lacinia, ex vitae gravida fermentum, lectus ipsum gravida arcu, id fermentum metus arcu vel metus. Curabitur eget sem eu risus tincidunt eleifend ac ornare magna.
                                        </div>
                                    </div>
                                </div>
                                <!-- /.card -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-footer">
            <button type="submit" class="btn btn-success">Salvar</button>
            <button type="reset" class="btn btn-default" onclick="javascript:history.go(-1)">Voltar</button>
        </div>
    </form>
</div>

<div class="modal fade" id="modalAbordagem" style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content bg-warning">
            <div class="modal-header">
                <h4 class="modal-title">Dicas de Abordagem</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <button type="button" class="btn btn-outline-dark">Informações</button>
                <button type="button" class="btn btn-outline-dark">Comparativo Região</button>
                <button type="button" class="btn btn-outline-dark">Suporte na Venda</button>
                <button type="button" class="btn btn-outline-dark">Reembolso</button>

                <p>  </p>
                <p>Olá, meu nome é (nome e sobrenome) consultor de benefícios da YIA Broker (ou nome de sua empresa), por gentileza o senhor(a) (Nome do Cliente)</p>
                <p>Sr(a) (nome do cliente) como vai? O motivo do meu contato é para apresentar ao senhor uma oportunidade através de uma consultoria gratuita sobre o plano de saúde atual   </p>
                <p>(Qual Plano) do senhor(a)! O(a) senhor(a) pode falar por 5 minutos? </p>
                <p>(se não) qual melhor horário para falarmos? </p>
                <p>(se sim) Falo em nome da April Broker (ou nome de sua empresa), somos uma Multinacional com mais de 30 anos de mercado e presente em 34 países especializados em identificar </p>
                <p>oportunidades de Custo x Benefício, através de uma consultoria gratuita em sua atual Apólice da (Operadora/Seguradora), o senhor(a) sabia que todos os anos o plano </p>
                <p>do senhor passa por reajustes que chegam até 30%?      </p>
                <p>- Pois é, essa é a minha especialidade, buscar oferecer uma opção de atendimento igual ou superior a que o senhor(a) possui atualmente e com um preço Justo assim reduzindo  </p>
                <p>seu Custo Mensal e possibilitando o investimento em outros ramos.  </p>
                <p>Perguntas: (Senhor para uma cotação mais assertiva vou fazer algumas perguntas, ok?)      </p>
                <p>  </p>
                <p>1) Atualmente o senhor possui um plano de saúde PF, Adesão ou PME? Como está o Custo x Benefício da sua apólice?  </p>
                <p>________________________________________________________________________________________________ </p>
                <p>2) Quantas vidas estão ativas? Quais idades?
                <p>________________________________________________________________________________________________ </p>
                <p>3) O senhor possui um CNPJ ativo? Qual ramo de atividade da empresa?                            </p>
                <p>________________________________________________________________________________________________     </p>
                <p>4) Qual a profissão ou formação acadêmica do senhor ou sua esposa? (Se cliente for Pessoa Física ou contrato por Adesão)  </p>
                <p>________________________________________________________________________________________________    </p>
                <p>5) Qual região você mora? Qual região trabalha? (importante para apresentar alternativas em caso de necessidade)    </p>
                <p>________________________________________________________________________________________________   </p>
                <p>6) Qual Hospital costuma utilizar em caso de emergência ou urgência?                                </p>
                <p>________________________________________________________________________________________________  </p>
                <p>7) Algumas das pessoas que vou cotar fazem ou está fazendo algum tratamento de saúde?             </p>
                <p>________________________________________________________________________________________________    </p>
                <p>8) Com estas informações vou elaborar uma consultoria e volto a ligar para senhor(a).                </p>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-outline-dark" data-dismiss="modal">Fechar</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<!-- /.modal Ligações -->
<div class="modal fade" id="modal-historico">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Atualização do histórico da ligação</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row" id="HistoricoMensagemDiv" style="display: none;">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <div class="alert alert-success alert-dismissible" id="HistoricoMensagemDivAlert">
                                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                                <i id="HistoricoMensagemIcon" class="icon fas fa-check"></i>
                                <span id="HistoricoMensagemSpan">Dados salvos com sucesso!</span>
                            </div>
                        </div>
                    </div>
                </div>
                <form method="post" asp-page="/NovaProposta" asp-page-handler="HistoricoLigacao" id="formHistoricoLigacao">
                    @Html.AntiForgeryToken()
                    <input type="hidden" asp-for="@Model.EntityHistoricoLigacao.IdUsuario" value="@Model.Entity.IdCliente">
                    <input type="hidden" asp-for="@Model.EntityHistoricoLigacao.IdProposta" value="@Model.Entity.IdProposta">

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Data e hora:</label>
                                <div class="input-group date" id="HistoricoDataHora" data-target-input="nearest">
                                    <input type="text" data-format="dd/MM/yyyy hh:mm:ss" asp-for="@Model.EntityHistoricoLigacao.DataCadastro" class=" form-control datetimepicker-input" data-target="#HistoricoDataHora" />
                                    <div class="input-group-append" data-target="#HistoricoDataHora" data-toggle="datetimepicker">
                                        <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Observações</label>
                                <textarea rows="3" class="form-control" placeholder="Observações" asp-for="@Model.EntityHistoricoLigacao.Observacao"></textarea>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                <button id="ButtonSalvarHistoricoLigacao" type="button" class="btn btn-primary">Salvar</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
